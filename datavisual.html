<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Visualization</title>
    <link rel="stylesheet" href="normalise.css" />
    <link rel="stylesheet" href="datavisual.css" />
    <script
      src="https://kit.fontawesome.com/4e9b44f205.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </head>

  <body>
    <nav>
      <input type="checkbox" name="" id="check" />
      <label for="check" class="bars"><i class="fa-solid fa-bars"></i></label>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="datavisual.html" class="active"> Data Visualization</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="design.html">Design</a></li>
        <li><a href="dataart.html" >Data Art</a></li>
        </a></li>
      </ul>
    </nav>
    <label for="name" class="name">Data Visualization:</label>
    <p class="intro">The graph below displays the a series of <b>albums</b> and the <b>percentage</b> of people that voted it as their <b>favouirte</b> amongst the listed. I conducted a voting poll on my instagram
      where several of my followers voted for their favourite album and these were the results  </p>
      
    <div id="bargraph"></div>

    <script>
      var data = [ 
        { album: "Room 25", percent: 87 },
        { album: "Mr Morale & the Big Steppers", percent: 79},
        { album: "Wasteland", percent: 75 },
        { album: "ApolloXXI", percent: 62 },
        { album: "The Suns Tirade", percent: 30 },
        { album: "Yung Bans Vol.5", percent: 15 },
      ];

      //sort bars according to percentages
      data = data.sort(function (a, b) {
        return d3.descending(a.percent, b.percent);
      });

      
      var margin = {
        top: 50,
        right: 50,
        bottom: 50,
        left: 510,
      };

      var width = 1200 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

      var svg = d3
        .select("#bargraph")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      var x = d3.scale
        .linear()
        .range([0, width])
        .domain([
          0,
          d3.max(data, function (d) {
            return d.percent;
          }),
        ]);

      var y = d3.scale
        .ordinal()
        .rangeRoundBands([height, 0], 0.1)
        .domain(
          data.map(function (d) {
            return d.album;
          })
        );

      // y axis show album names
      var yAxis = d3.svg
        .axis()
        .scale(y)
      
        .tickSize(0)
        .orient("left");

      var gy = svg.append("g").attr("class", "y axis").call(yAxis);

      var bars = svg.selectAll(".bar").data(data).enter().append("g");

      
      bars
        .append("rect")
        .attr("class", "bar")
        .attr("y", function (d) {
          return y(d.album);
        })
        .attr("height", y.rangeBand())
        .attr("x", 0)
        .attr("width", function (d) {
          return x(d.percent);
        });

      
      bars
        .append("text")
        .attr("class", "label")
  
        .attr("y", function (d) {
          return y(d.album) + y.rangeBand() / 2 + 4;
        })
        
        .attr("x", function (d) {
          return x(d.percent) + 3;
        })
        .text(function (d) {
          return d.percent;
        });

    </script>
    <p class="cite"><b>Code reference:</b> Recht, H. (n.d.). Simple horizontal bar chart. bl.ocks.org. Retrieved September 9, 2022, from https://bl.ocks.org/hrecht/f84012ee860cb4da66331f18d588eee3 </p>


 <footer class="footer">
  <p><strong>Email:</strong> miss.nozii.sithole@gmail.com</p>
  <p><strong>Tel:</strong> (065) 744 9243</p>
 </footer>
  </body>
</html>
